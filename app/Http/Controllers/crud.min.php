<?phpnamespace App\Http\Controllers;use Illuminate\Http\Request;use App\Models\foods;use App\Models\food_categories;use App\Models\food_food_categories;use Illuminate\Support\Str;use \Edamam\Support\Nutrient;use \Edamam\Api\FoodDatabase\FoodRequest;use \Edamam\Api\FoodDatabase\FoodDatabase;class crud extends Controller{ // public function index() { return view('crud');} public function api_call(Request $req){ FoodDatabase::setApiCredentials( env('EDAMAM_ID'), env('EDAMAM_KEY')); $data1=FoodRequest::find(['ingredient'=>$req->input('ingr')])->results(); echo "<pre>"; //print_r($data1[0]); $result=json_decode($data1[0]->nutrients); $api_name=$data1[0]->label; //dd($req); //$m=$req->select $m=json_encode($req->select);//category $l=json_encode($req->select1);//part return view('dashboard')->with('k',[ 'category'=>$m, 'part'=>$l, 'ingredient'=>$req->input('ingr'), 'food'=>$api_name, 'calories'=>$result->ENERC_KCAL, 'protein'=>$result->PROCNT, 'fat'=>$result->FAT, 'carbohydrates'=>$result->CHOCDF, 'vitamins'=>30, 'minerals'=>$result->FIBTG ]);} public function inserter (Request $req){ $food=new foods(); $food->name=Str::random(5); $food->api_name=Str::random(4); $food->description=Str::random(8); $food->save(); $food_food_category=new food_food_categories(); //$food_food_category->id=$req->id; $food_food_category->food_id=$food->id; $food_food_category->food_category_id=$food_category->id; $food_food_category->save();}}